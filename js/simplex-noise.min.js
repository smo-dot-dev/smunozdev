(function(){"use strict";function r(r){var a;a="function"==typeof r?r:r?t(r):Math.random,this.p=e(a),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var o=0;o<512;o++)this.perm[o]=this.p[255&o],this.permMod12[o]=this.perm[o]%12}function e(r){var e,t=new Uint8Array(256);for(e=0;e<256;e++)t[e]=e;for(e=0;e<255;e++){var a=e+~~(r()*(256-e)),o=t[e];t[e]=t[a],t[a]=o}return t}function t(){var r=0,e=0,t=0,o=1,n=a();r=n(" "),e=n(" "),t=n(" ");for(var i=0;i<arguments.length;i++)r-=n(arguments[i]),r<0&&(r+=1),e-=n(arguments[i]),e<0&&(e+=1),t-=n(arguments[i]),t<0&&(t+=1);return n=null,function(){var a=2091639*r+2.3283064365386963e-10*o;return r=e,e=t,t=a-(o=0|a)}}function a(){var r=4022871197;return function(e){e=e.toString();for(var t=0;t<e.length;t++){r+=e.charCodeAt(t);var a=.02519603282416938*r;r=a>>>0,a-=r,a*=r,r=a>>>0,a-=r,r+=4294967296*a}return 2.3283064365386963e-10*(r>>>0)}}var o=.5*(Math.sqrt(3)-1),n=(3-Math.sqrt(3))/6,i=1/3,f=1/6,s=(Math.sqrt(5)-1)/4,v=(5-Math.sqrt(5))/20;r.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(r,e){var t,a,i=this.permMod12,f=this.perm,s=this.grad3,v=0,h=0,u=0,l=(r+e)*o,d=Math.floor(r+l),p=Math.floor(e+l),M=(d+p)*n,m=d-M,c=p-M,y=r-m,w=e-c;y>w?(t=1,a=0):(t=0,a=1);var g=y-t+n,A=w-a+n,x=y-1+2*n,q=w-1+2*n,D=255&d,S=255&p,U=.5-y*y-w*w;if(U>=0){var b=3*i[D+f[S]];U*=U,v=U*U*(s[b]*y+s[b+1]*w)}var F=.5-g*g-A*A;if(F>=0){var N=3*i[D+t+f[S+a]];F*=F,h=F*F*(s[N]*g+s[N+1]*A)}var C=.5-x*x-q*q;if(C>=0){var P=3*i[D+1+f[S+1]];C*=C,u=C*C*(s[P]*x+s[P+1]*q)}return 70*(v+h+u)},noise3D:function(r,e,t){var a,o,n,s,v,h,u,l,d,p,M=this.permMod12,m=this.perm,c=this.grad3,y=(r+e+t)*i,w=Math.floor(r+y),g=Math.floor(e+y),A=Math.floor(t+y),x=(w+g+A)*f,q=w-x,D=g-x,S=A-x,U=r-q,b=e-D,F=t-S;U>=b?b>=F?(v=1,h=0,u=0,l=1,d=1,p=0):U>=F?(v=1,h=0,u=0,l=1,d=0,p=1):(v=0,h=0,u=1,l=1,d=0,p=1):b<F?(v=0,h=0,u=1,l=0,d=1,p=1):U<F?(v=0,h=1,u=0,l=0,d=1,p=1):(v=0,h=1,u=0,l=1,d=1,p=0);var N=U-v+f,C=b-h+f,P=F-u+f,T=U-l+2*f,_=b-d+2*f,j=F-p+2*f,k=U-1+3*f,z=b-1+3*f,B=F-1+3*f,E=255&w,G=255&g,H=255&A,I=.6-U*U-b*b-F*F;if(I<0)a=0;else{var J=3*M[E+m[G+m[H]]];I*=I,a=I*I*(c[J]*U+c[J+1]*b+c[J+2]*F)}var K=.6-N*N-C*C-P*P;if(K<0)o=0;else{var L=3*M[E+v+m[G+h+m[H+u]]];K*=K,o=K*K*(c[L]*N+c[L+1]*C+c[L+2]*P)}var O=.6-T*T-_*_-j*j;if(O<0)n=0;else{var Q=3*M[E+l+m[G+d+m[H+p]]];O*=O,n=O*O*(c[Q]*T+c[Q+1]*_+c[Q+2]*j)}var R=.6-k*k-z*z-B*B;if(R<0)s=0;else{var V=3*M[E+1+m[G+1+m[H+1]]];R*=R,s=R*R*(c[V]*k+c[V+1]*z+c[V+2]*B)}return 32*(a+o+n+s)},noise4D:function(r,e,t,a){var o,n,i,f,h,u,l,d,p,M,m,c,y,w,g,A,x,q=this.perm,D=this.grad4,S=(r+e+t+a)*s,U=Math.floor(r+S),b=Math.floor(e+S),F=Math.floor(t+S),N=Math.floor(a+S),C=(U+b+F+N)*v,P=U-C,T=b-C,_=F-C,j=N-C,k=r-P,z=e-T,B=t-_,E=a-j,G=0,H=0,I=0,J=0;k>z?G++:H++,k>B?G++:I++,k>E?G++:J++,z>B?H++:I++,z>E?H++:J++,B>E?I++:J++,u=G>=3?1:0,l=H>=3?1:0,d=I>=3?1:0,p=J>=3?1:0,M=G>=2?1:0,m=H>=2?1:0,c=I>=2?1:0,y=J>=2?1:0,w=G>=1?1:0,g=H>=1?1:0,A=I>=1?1:0,x=J>=1?1:0;var K=k-u+v,L=z-l+v,O=B-d+v,Q=E-p+v,R=k-M+2*v,V=z-m+2*v,W=B-c+2*v,X=E-y+2*v,Y=k-w+3*v,Z=z-g+3*v,$=B-A+3*v,rr=E-x+3*v,er=k-1+4*v,tr=z-1+4*v,ar=B-1+4*v,or=E-1+4*v,nr=255&U,ir=255&b,fr=255&F,sr=255&N,vr=.6-k*k-z*z-B*B-E*E;if(vr<0)o=0;else{var hr=q[nr+q[ir+q[fr+q[sr]]]]%32*4;vr*=vr,o=vr*vr*(D[hr]*k+D[hr+1]*z+D[hr+2]*B+D[hr+3]*E)}var ur=.6-K*K-L*L-O*O-Q*Q;if(ur<0)n=0;else{var lr=q[nr+u+q[ir+l+q[fr+d+q[sr+p]]]]%32*4;ur*=ur,n=ur*ur*(D[lr]*K+D[lr+1]*L+D[lr+2]*O+D[lr+3]*Q)}var dr=.6-R*R-V*V-W*W-X*X;if(dr<0)i=0;else{var pr=q[nr+M+q[ir+m+q[fr+c+q[sr+y]]]]%32*4;dr*=dr,i=dr*dr*(D[pr]*R+D[pr+1]*V+D[pr+2]*W+D[pr+3]*X)}var Mr=.6-Y*Y-Z*Z-$*$-rr*rr;if(Mr<0)f=0;else{var mr=q[nr+w+q[ir+g+q[fr+A+q[sr+x]]]]%32*4;Mr*=Mr,f=Mr*Mr*(D[mr]*Y+D[mr+1]*Z+D[mr+2]*$+D[mr+3]*rr)}var cr=.6-er*er-tr*tr-ar*ar-or*or;if(cr<0)h=0;else{var yr=q[nr+1+q[ir+1+q[fr+1+q[sr+1]]]]%32*4;cr*=cr,h=cr*cr*(D[yr]*er+D[yr+1]*tr+D[yr+2]*ar+D[yr+3]*or)}return 27*(o+n+i+f+h)}},r._buildPermutationTable=e,"undefined"!=typeof define&&define.amd&&define(function(){return r}),"undefined"!=typeof exports?exports.SimplexNoise=r:"undefined"!=typeof window&&(window.SimplexNoise=r),"undefined"!=typeof module&&(module.exports=r)})();